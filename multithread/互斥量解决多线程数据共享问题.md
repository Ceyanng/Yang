# 多线程数据安全
在多个线程中共享数据时，需要注意线程安全问题，如果多个线程同时访问同一变量，并且其中至少有一个线程对该变量进行了写操作，那么就会出现数据竞争问题。数据竞争可能导致程序崩溃，产生未定义的结果。    
避免数据竞争问题需要使用线程同步机制，常见的同步机制包括互斥量，条件变量，原子操作等。    
```c++
//常见的数据竞争代码：
#include<iostream>
#include<thread>
#include<mutex>
int a = 0;
std::mutex mtx;
void func() {
	for (int i = 0; i < 10000; i++) {
		mtx.lock();
		a += 1;
		mtx.unlock();
	}
}
int main() {
	std::thread t1{ func };
	std::thread t2{ func };
	t1.join();
	t2.join();
	std::cout << a << std::endl;
	return 0;
}
```
线程安全： 多线程程序每一次的运行结果都和单线程运行的结果是一样的，那么这段程序就是线程安全的。
